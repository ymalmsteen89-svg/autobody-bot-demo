<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Metal Master ¬∑ AI Chatbot Demos</title>
    <link rel="stylesheet" href="./widget.css" />
    <style>
      :root{
        --bg:#070709;
        --panel:rgba(255,255,255,.06);
        --panel2:rgba(255,255,255,.04);
        --border:rgba(255,255,255,.14);
        --text:#eaeaf0;
        --muted:rgba(234,234,240,.72);
        --mm-red:#d40000;
        --mm-red2:#ff2a2a;
        --mm-gold:#ffcc66;
      }
      *{ box-sizing:border-box; }
      html,body{ height:100%; }

      body{
        margin:0;
        padding:22px;
        color:var(--text);
        font-family:system-ui,-apple-system,Segoe UI,Roboto,sans-serif;
        background:
          radial-gradient(1100px 650px at 10% -10%, rgba(212,0,0,.16), transparent 45%),
          radial-gradient(900px 520px at 95% 10%, rgba(255,204,102,.09), transparent 40%),
          radial-gradient(900px 700px at 50% 120%, rgba(255,255,255,.06), transparent 45%),
          var(--bg);
      }
      .wrap{ max-width:1120px; margin:0 auto; }

      /* Brand bar */
      .brandbar{
        display:flex;
        align-items:center;
        justify-content:space-between;
        gap:12px;
        margin-bottom:14px;
      }
      .brand{
        display:flex;
        align-items:center;
        gap:10px;
        text-decoration:none;
        color:var(--text);
      }
      .logo{
        width:36px;height:36px;
        border-radius:14px;
        background: linear-gradient(180deg, var(--mm-red2), #9d0000);
        box-shadow: 0 10px 26px rgba(212,0,0,.35);
        display:grid; place-items:center;
        border:1px solid rgba(255,255,255,.12);
      }
      .logo svg{ width:20px; height:20px; opacity:.95; }
      .brandname{ font-weight:980; letter-spacing:.02em; line-height:1.05; }
      .brandsub{ display:block; font-size:12px; color:var(--muted); font-weight:700; margin-top:2px; }

      .pill{
        border:1px solid var(--border);
        background:rgba(255,255,255,.06);
        padding:8px 10px;
        border-radius:999px;
        font-weight:850;
        font-size:12px;
        color:#ffd2d2;
        display:inline-flex;
        align-items:center;
        gap:8px;
      }
      .pill .dot{
        width:8px;height:8px;border-radius:99px;
        background:var(--mm-red2);
        box-shadow:0 0 0 6px rgba(255,42,42,.10);
      }

      /* Hero */
      .hero{
        border:1px solid rgba(255,255,255,.16);
        background: linear-gradient(180deg, rgba(255,255,255,.09), rgba(255,255,255,.03));
        border-radius:22px;
        padding:22px;
        box-shadow:0 20px 55px rgba(0,0,0,.38);
        overflow:hidden;
        position:relative;
      }
      .hero-glow{
        position:absolute;
        inset:-3px;
        background: conic-gradient(from 180deg,
          rgba(255,42,42,.0),
          rgba(255,42,42,.28),
          rgba(255,204,102,.22),
          rgba(255,42,42,.28),
          rgba(255,42,42,.0)
        );
        filter: blur(14px);
        opacity:.55;
        animation: glowspin 9s linear infinite;
        pointer-events:none;
      }
      @keyframes glowspin{ from{ transform: rotate(0deg);} to{ transform: rotate(360deg);} }
      .hero::after{
        content:"";
        position:absolute; inset:-2px;
        background:
          radial-gradient(760px 240px at 12% 10%, rgba(255,42,42,.12), transparent 55%),
          radial-gradient(760px 240px at 86% 10%, rgba(255,204,102,.09), transparent 55%);
        pointer-events:none;
        opacity:.9;
      }
      .hero > *{ position:relative; z-index:1; }

      .hero-top{
        display:grid;
        grid-template-columns: 1.2fr .8fr;
        gap:14px;
        align-items:stretch;
      }
      @media (max-width: 980px){
        .hero-top{ grid-template-columns: 1fr; }
      }

      h1{ margin:6px 0 10px; font-size:30px; letter-spacing:.01em; }
      .lead{
        margin:0 0 12px;
        color:var(--muted);
        font-size:15px;
        line-height:1.5;
      }
      .lead strong{ color:rgba(255,255,255,.92); }

      .value{
        display:inline-flex;
        align-items:center;
        gap:10px;
        margin-top:6px;
        padding:10px 12px;
        border-radius:16px;
        border:1px solid rgba(255,255,255,.14);
        background: rgba(0,0,0,.18);
        font-weight:950;
      }
      .value .spark{
        width:10px;height:10px;border-radius:99px;
        background:var(--mm-gold);
        box-shadow:0 0 0 8px rgba(255,204,102,.10);
      }

      .howto{
        border:1px solid rgba(255,255,255,.14);
        background: linear-gradient(180deg, rgba(0,0,0,.22), rgba(255,255,255,.04));
        border-radius:18px;
        padding:14px;
        box-shadow: 0 18px 38px rgba(0,0,0,.32);
      }
      .howto h3{
        margin:0 0 8px;
        font-size:14px;
        letter-spacing:.02em;
        text-transform:uppercase;
        opacity:.9;
      }
      .howto ol{
        margin:0;
        padding-left:18px;
        color:rgba(234,234,240,.80);
        font-size:13px;
        line-height:1.4;
      }
      .howto b{ color:rgba(255,255,255,.92); }

      /* Top launch buttons */
      .launch-grid{
        margin-top:12px;
        display:grid;
        grid-template-columns: repeat(4, minmax(0, 1fr));
        gap:10px;
      }
      @media (max-width: 980px){
        .launch-grid{ grid-template-columns: 1fr; }
      }

      /* Buttons */
      .btn{
        appearance:none;
        border:1px solid var(--border);
        background:rgba(255,255,255,.06);
        color:var(--text);
        padding:12px 14px;
        border-radius:14px;
        cursor:pointer;
        font-weight:950;
        font-size:14px;
        transition: transform .08s ease, background .15s ease, box-shadow .15s ease, opacity .15s ease;
        text-decoration:none;
        display:inline-flex;
        align-items:center;
        justify-content:center;
        gap:10px;
        min-height:46px;
        width:100%;
      }
      .btn:hover{ background:rgba(255,255,255,.12); transform: translateY(-1px); }
      .btn:active{ transform: translateY(0); }

      .btn-primary{
        border:none;
        background: linear-gradient(180deg, var(--mm-red2), #b80000);
        box-shadow: 0 10px 24px rgba(212,0,0,.35);
        position:relative;
        overflow:hidden;
      }
      .btn-primary::after{
        content:"";
        position:absolute; inset:-2px;
        background: radial-gradient(240px 90px at 20% 20%, rgba(255,255,255,.22), transparent 60%);
        opacity:.8;
        transform: translateX(-40%);
        transition: transform .45s ease;
        pointer-events:none;
      }
      .btn-primary:hover::after{ transform: translateX(25%); }

      .btn-ghost{ background: rgba(0,0,0,.22); }

      /* Scrolling feature marquee */
      .marquee{
        margin-top:14px;
        border:1px solid rgba(255,255,255,.12);
        background: rgba(0,0,0,.22);
        border-radius:16px;
        overflow:hidden;
        position:relative;
      }
      .marquee::before,.marquee::after{
        content:"";
        position:absolute; top:0; bottom:0;
        width:64px; pointer-events:none; z-index:2;
      }
      .marquee::before{ left:0; background: linear-gradient(90deg, rgba(7,7,9,.95), transparent); }
      .marquee::after{ right:0; background: linear-gradient(270deg, rgba(7,7,9,.95), transparent); }

      .marquee-track{
        display:flex;
        gap:26px;
        padding:10px 12px;
        white-space:nowrap;
        will-change:transform;
        animation: scroll 26s linear infinite;
      }
      .marquee:hover .marquee-track{ animation-play-state:paused; }
      @keyframes scroll{ from{ transform: translateX(0); } to{ transform: translateX(-50%); } }

      .tag{
        display:inline-flex;
        align-items:center;
        gap:8px;
        font-weight:900;
        font-size:13px;
        color:rgba(255,255,255,.88);
        opacity:.95;
      }
      .tag b{ color:var(--mm-gold); font-weight:980; }
      .tag .mini{
        width:7px;height:7px;border-radius:99px;
        background: rgba(255,255,255,.55);
      }

      /* Sections + cards */
      .section{ margin-top:22px; }
      .section h2{ font-size:18px; margin:0 0 10px; }
      .sub{ margin:0 0 14px; color:var(--muted); font-size:14px; line-height:1.45; }

      .grid{
        display:grid;
        grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
        gap:14px;
      }
      .card{
        border:1px solid var(--border);
        background: linear-gradient(180deg, var(--panel), var(--panel2));
        border-radius:18px;
        padding:16px;
        box-shadow:0 16px 34px rgba(0,0,0,.28);
        position:relative;
        overflow:hidden;
      }
      .card::before{
        content:"";
        position:absolute; inset:-1px;
        border-radius:18px;
        background: linear-gradient(135deg, rgba(255,42,42,.22), rgba(255,204,102,.14), rgba(255,255,255,0));
        opacity:.22;
        pointer-events:none;
      }
      .card > *{ position:relative; z-index:1; }

      .name{ font-weight:980; font-size:16px; margin:0 0 6px; }
      .meta{ margin:0 0 12px; opacity:.92; font-size:13px; line-height:1.35; color:rgba(234,234,240,.82); }
      .pillrow{ display:flex; flex-wrap:wrap; gap:8px; }

      .status{ margin-top:14px; font-size:13px; opacity:.9; color:rgba(234,234,240,.85); }
      .footer{ margin-top:22px; opacity:.6; font-size:12px; color:rgba(234,234,240,.70); }

      /* Form */
      form .row{ display:grid; gap:10px; }
      .field{
        width:100%;
        padding:12px;
        border-radius:12px;
        border:1px solid var(--border);
        background:#0f0f12;
        color:var(--text);
        font-weight:650;
        outline:none;
      }
      .field::placeholder{ color:rgba(234,234,240,.50); font-weight:650; }
      .field:focus{ border-color: rgba(255,42,42,.55); box-shadow: 0 0 0 6px rgba(255,42,42,.10); }

      .notice{
        border:1px dashed rgba(255,255,255,.18);
        background: rgba(0,0,0,.18);
        border-radius:16px;
        padding:12px 14px;
        color: rgba(234,234,240,.85);
        font-size:13px;
        line-height:1.4;
      }
      .success{
        border:1px solid rgba(255,204,102,.28);
        background: rgba(255,204,102,.10);
        color: rgba(255,240,210,.92);
      }
      .error{
        border:1px solid rgba(255,42,42,.35);
        background: rgba(255,42,42,.10);
        color: rgba(255,220,220,.92);
      }

      /* Launcher pulse */
      @keyframes ccPulse {
        0%   { transform: scale(1);   box-shadow: 0 0 0 0 rgba(255,42,42,.45); }
        55%  { transform: scale(1.06); box-shadow: 0 0 0 18px rgba(255,42,42,.0); }
        100% { transform: scale(1);   box-shadow: 0 0 0 0 rgba(255,42,42,.0); }
      }
      #cc-launcher.cc-pulse{ animation: ccPulse 650ms ease-out 1; }

      /* Opaque + always-on-top chat */
      #cc-panel{
        position: fixed !important;
        z-index: 2147483000 !important;
        opacity: 1 !important;
        background: linear-gradient(180deg, rgba(15,15,20,0.995), rgba(10,10,14,0.99)) !important;
        backdrop-filter: none !important;
        -webkit-backdrop-filter: none !important;
        border: 1px solid rgba(255,255,255,0.14) !important;
        box-shadow: 0 30px 80px rgba(0,0,0,0.65), 0 0 0 1px rgba(255,42,42,0.15) inset;
        pointer-events: auto !important;
      }
      #cc-launcher{
        position: fixed !important;
        z-index: 2147483001 !important;
        pointer-events: auto !important;
      }
      /* These class hooks may or may not exist, but safe if they do */
      #cc-panel .cc-messages{ background: rgba(0,0,0,0.35) !important; }
      #cc-panel .cc-bubble{ background: rgba(255,255,255,0.10) !important; border: 1px solid rgba(255,255,255,0.12); }
      #cc-panel .cc-input{ background: rgba(8,8,10,0.98) !important; border-top: 1px solid rgba(255,255,255,0.14); }

      @media (max-width: 420px){
        body{ padding:16px; }
        h1{ font-size:26px; }
      }
    </style>
  </head>

  <body>
    <div class="wrap">
      <div class="brandbar">
        <a class="brand" href="#" aria-label="Metal Master">
          <span class="logo" aria-hidden="true">
            <svg viewBox="0 0 24 24" fill="none">
              <path d="M6 4v8c0 2.8 2.2 5 5 5h2c2.8 0 5-2.2 5-5V4l-3 3-2-3-2 6-2-6-2 3-3-3Z"
                    stroke="white" stroke-width="1.6" stroke-linejoin="round" />
            </svg>
          </span>
          <div>
            <div class="brandname">METAL MASTER</div>
            <span class="brandsub">Business chatbots ‚Ä¢ websites ‚Ä¢ automation</span>
          </div>
        </a>

        <span class="pill" title="Live demos">
          <span class="dot"></span> Live demo hub
        </span>
      </div>

      <div class="hero">
        <div class="hero-glow" aria-hidden="true"></div>

        <div class="hero-top">
          <div>
            <h1>AI chatbots that feel like a real front desk ü§ò</h1>
            <p class="lead">
              Thanks for coming by! This is a showroom of <strong>business-ready AI chatbots</strong>.
              Pick a demo to watch it work, or contact <strong>Ryan</strong> for a custom build for your company.
              Websites, lead capture, automations, integrations, or ‚Äúthat weird thing you‚Äôve always wanted‚Äù are all on the menu.
            </p>

            <div class="value"><span class="spark" aria-hidden="true"></span> Fast setup, no lock-in ‚Äî fully customizable.</div>

            <div class="launch-grid" aria-label="Launch a demo">
              <button class="btn btn-primary" data-launch="demo-autobody">Launch Auto Body</button>
              <button class="btn btn-primary" data-launch="wesbecker-automotive">Launch Wesbecker</button>
              <button class="btn btn-primary" data-launch="demo-plumbing-hvac">Launch Plumbing/HVAC</button>
              <a class="btn btn-ghost" href="mailto:Ryan@metalmasterapp.com?subject=Custom%20Chatbot%20Demo">Email Ryan</a>
            </div>
          </div>

          <div class="howto" role="note" aria-label="How to use the demo">
            <h3>How to use the demo</h3>
            <ol>
              <li>Click a <b>Launch</b> button.</li>
              <li>The chat opens automatically. If you close it, use the <b>chat bubble</b> in the lower-right.</li>
              <li>Try ‚Äúquote,‚Äù ‚Äúbook,‚Äù ‚Äúhours,‚Äù or ‚Äúupload a photo.‚Äù</li>
            </ol>
          </div>
        </div>

        <div class="marquee" aria-label="Bot capabilities marquee">
          <div class="marquee-track">
            <span class="tag"><span class="mini"></span><b>24/7</b> answers</span>
            <span class="tag"><span class="mini"></span>Instant <b>quotes</b></span>
            <span class="tag"><span class="mini"></span>Smart <b>lead capture</b></span>
            <span class="tag"><span class="mini"></span>Booking + <b>callbacks</b></span>
            <span class="tag"><span class="mini"></span>Photo upload for <b>estimates</b></span>
            <span class="tag"><span class="mini"></span>FAQ + policy <b>deflection</b></span>
            <span class="tag"><span class="mini"></span>SMS/email <b>follow-ups</b></span>
            <span class="tag"><span class="mini"></span>CRM-ready <b>handoff</b></span>
            <span class="tag"><span class="mini"></span>Analytics + <b>insights</b></span>
            <span class="tag"><span class="mini"></span>Website upgrades that <b>convert</b></span>

            <!-- duplicate for seamless loop -->
            <span class="tag"><span class="mini"></span><b>24/7</b> answers</span>
            <span class="tag"><span class="mini"></span>Instant <b>quotes</b></span>
            <span class="tag"><span class="mini"></span>Smart <b>lead capture</b></span>
            <span class="tag"><span class="mini"></span>Booking + <b>callbacks</b></span>
            <span class="tag"><span class="mini"></span>Photo upload for <b>estimates</b></span>
            <span class="tag"><span class="mini"></span>FAQ + policy <b>deflection</b></span>
            <span class="tag"><span class="mini"></span>SMS/email <b>follow-ups</b></span>
            <span class="tag"><span class="mini"></span>CRM-ready <b>handoff</b></span>
            <span class="tag"><span class="mini"></span>Analytics + <b>insights</b></span>
            <span class="tag"><span class="mini"></span>Website upgrades that <b>convert</b></span>
          </div>
        </div>
      </div>

      <div class="section" id="capabilities">
        <h2>What these bots can do</h2>
        <p class="sub">
          Not a toy. Not a template. This is production-style UX built to match your workflow and make customers feel taken care of.
        </p>

        <div class="grid">
          <div class="card">
            <div class="name">Lead capture that converts</div>
            <div class="meta">Collects the right info, qualifies the job, and sends it to you cleanly. No wall-of-text leads.</div>
          </div>
          <div class="card">
            <div class="name">Booking, callbacks, follow-ups</div>
            <div class="meta">After-hours scheduling and lead follow-up, so you wake up to booked work.</div>
          </div>
          <div class="card">
            <div class="name">Quotes, estimates, and triage</div>
            <div class="meta">Guides customers through questions and can request photos for faster estimates.</div>
          </div>
          <div class="card">
            <div class="name">Integrations & automations</div>
            <div class="meta">Webhooks, CRMs, sheets, inboxes, calendars, and custom APIs. If it‚Äôs connectable, we can connect it.</div>
          </div>
          <div class="card">
            <div class="name">Fast website upgrades</div>
            <div class="meta">Landing pages, forms, SEO basics, and conversion fixes so the bot isn‚Äôt carrying the whole operation.</div>
          </div>
          <div class="card">
            <div class="name">Analytics & insight loops</div>
            <div class="meta">Track what customers ask, where they drop off, and tune the bot based on real behavior.</div>
          </div>
        </div>

        <div class="section" style="margin-top:14px">
          <h2 style="font-size:16px;margin:0 0 10px">Trusted stack</h2>
          <div class="grid" style="grid-template-columns: repeat(auto-fit, minmax(170px, 1fr)); gap:10px">
            <div class="card" style="padding:12px"><div class="name" style="font-size:14px;margin:0">Netlify</div><div class="meta" style="margin:6px 0 0">Fast deploys + Functions</div></div>
            <div class="card" style="padding:12px"><div class="name" style="font-size:14px;margin:0">Supabase</div><div class="meta" style="margin:6px 0 0">DB + auth + storage</div></div>
            <div class="card" style="padding:12px"><div class="name" style="font-size:14px;margin:0">TypeScript</div><div class="meta" style="margin:6px 0 0">Real engineering</div></div>
            <div class="card" style="padding:12px"><div class="name" style="font-size:14px;margin:0">Webhooks</div><div class="meta" style="margin:6px 0 0">Integrate anything</div></div>
            <div class="card" style="padding:12px"><div class="name" style="font-size:14px;margin:0">SMS / Email</div><div class="meta" style="margin:6px 0 0">Follow-ups & alerts</div></div>
            <div class="card" style="padding:12px"><div class="name" style="font-size:14px;margin:0">Calendars / CRMs</div><div class="meta" style="margin:6px 0 0">Real pipeline</div></div>
          </div>
        </div>
      </div>

      <div class="section" id="demoSection">
        <h2>Demo chatbots</h2>
        <p class="sub">
          Each demo uses the same codebase with different configuration. Launch one and the chat opens automatically.
        </p>

        <div class="grid" id="demoGrid"></div>
        <div class="status" id="status"></div>
      </div>

      <div class="section" id="contactSection">
        <h2>Contact Ryan</h2>
        <p class="sub">Want a custom demo or help with your site? Send a quick message and I‚Äôll get back to you.</p>

        <div id="contactWrapper">
          <form class="card" id="contactForm">
            <div class="row">
              <input class="field" required name="name" placeholder="Your name" autocomplete="name" />
              <input class="field" required name="email" type="email" placeholder="Your email" autocomplete="email" />
              <input class="field" name="phone" type="tel" placeholder="Phone (optional)" autocomplete="tel" />
              <textarea class="field" required name="message" rows="5" placeholder="What do you want to build?"></textarea>

              <button class="btn btn-primary" id="contactSubmit" type="submit">Send message</button>
              <div class="notice" id="contactNotice">
                Tip: If you prefer email, use the <strong>Email Ryan</strong> button above.
              </div>
            </div>
          </form>
        </div>
      </div>

      <div class="footer">
        Leads endpoint: <code>/.netlify/functions/new-lead</code>
      </div>
    </div>

    <script>
      // ---- Demo catalog ----
      const DEMOS = [
        {
          id: "demo-autobody",
          title: "Demo Auto Body",
          phone: "303-555-1212",
          address: "Denver Metro (demo)",
          accent: "#d40000",
          kind: "autobody",
        },
        {
          id: "wesbecker-automotive",
          title: "Wesbecker Automotive",
          phone: "720-938-7000",
          address: "6402 S Cedar St, Littleton, CO 80120",
          accent: "#d40000",
          kind: "automotive",
        },
        {
          id: "demo-plumbing-hvac",
          title: "Summit Plumbing & HVAC",
          phone: "303-555-0198",
          address: "Front Range Service Area (demo)",
          accent: "#0b7285",
          kind: "home_service",
        },
      ];

      let widgetScriptTag = null;

      function setStatus(msg) {
        document.getElementById("status").textContent = msg || "";
      }

      function buildConfig(demo) {
        return {
          shopName: demo.title,
          phoneNumber: demo.phone,
          shopAddress: demo.address,
          serviceZipHint: "Enter your ZIP",
          apiUrl: "/.netlify/functions/new-lead",
          brandAccent: demo.accent,
          demoId: demo.id,
          demoKind: demo.kind,
        };
      }

      function unloadWidget() {
        const panel = document.getElementById("cc-panel");
        const launcher = document.getElementById("cc-launcher");
        if (panel) panel.remove();
        if (launcher) launcher.remove();

        if (widgetScriptTag) {
          widgetScriptTag.remove();
          widgetScriptTag = null;
        }
        delete window.CRASH_CONCIERGE_CONFIG;
      }

      function loadWidgetForDemo(demo) {
        unloadWidget();

        window.CRASH_CONCIERGE_CONFIG = buildConfig(demo);

        widgetScriptTag = document.createElement("script");
        widgetScriptTag.src = "./widget.js?v=" + Date.now(); // cache-bust

        widgetScriptTag.onload = () => {
          setStatus(`Loaded: ${demo.title} ‚Äî opening chat‚Ä¶`);

          const robustClick = (el) => {
            try { el.click(); } catch {}
            try { el.dispatchEvent(new MouseEvent("click", { bubbles:true, cancelable:true, view:window })); } catch {}
          };

          const tryOpen = () => {
            const launcher = document.getElementById("cc-launcher");
            if (launcher) {
              launcher.classList.add("cc-pulse");
              setTimeout(() => {
                robustClick(launcher);
                launcher.classList.remove("cc-pulse");
              }, 220);

              // Ensure topmost
              setTimeout(() => {
                const panel = document.getElementById("cc-panel");
                if (panel) { panel.style.zIndex = "2147483000"; panel.style.opacity = "1"; }
                launcher.style.zIndex = "2147483001";
              }, 320);

              return;
            }
            setTimeout(tryOpen, 120);
          };

          setTimeout(tryOpen, 50);
        };

        widgetScriptTag.onerror = () => {
          setStatus("Failed to load widget.js. Check that ./widget.js exists in the publish directory.");
        };

        document.body.appendChild(widgetScriptTag);
      }

      function renderDemos() {
        const grid = document.getElementById("demoGrid");
        grid.innerHTML = "";

        for (const demo of DEMOS) {
          const card = document.createElement("div");
          card.className = "card";
          card.innerHTML = `
            <div class="name">${demo.title}</div>
            <div class="meta">
              <div><strong>Phone:</strong> ${demo.phone}</div>
              <div><strong>Address:</strong> ${demo.address}</div>
            </div>
            <div class="pillrow">
              <button class="btn btn-primary" data-action="launch" data-id="${demo.id}">Launch demo</button>
              <button class="btn" data-action="reload" data-id="${demo.id}">Reload</button>
            </div>
          `;
          grid.appendChild(card);
        }

        grid.addEventListener("click", (e) => {
          const btn = e.target.closest("button");
          if (!btn) return;

          const id = btn.getAttribute("data-id");
          const action = btn.getAttribute("data-action");
          const demo = DEMOS.find((d) => d.id === id);
          if (!demo) return;

          if (action === "launch" || action === "reload") {
            loadWidgetForDemo(demo);
          }
        });

        setStatus("Pick a demo above. The chat will open automatically.");
      }

      // Hero launch buttons
      document.querySelectorAll("[data-launch]").forEach((btn) => {
        btn.addEventListener("click", () => {
          const id = btn.getAttribute("data-launch");
          const demo = DEMOS.find((d) => d.id === id) || DEMOS[0];
          if (!demo) return;

          loadWidgetForDemo(demo);

          // Small scroll so user notices the demo section exists, but don't yank them hard
          const demoSection = document.getElementById("demoSection");
          if (demoSection) demoSection.scrollIntoView({ behavior:"smooth" });
        });
      });

      // Contact form: submit JSON to new-lead
      async function handleContactSubmit(e) {
        e.preventDefault();

        const form = e.currentTarget;
        const btn = document.getElementById("contactSubmit");
        const notice = document.getElementById("contactNotice");

        btn.disabled = true;
        btn.style.opacity = ".75";
        btn.textContent = "Sending...";

        try {
          const data = Object.fromEntries(new FormData(form).entries());

          const cfg = window.CRASH_CONCIERGE_CONFIG || null;
          if (cfg?.demoId) data.activeDemoId = cfg.demoId;
          if (cfg?.demoKind) data.activeDemoKind = cfg.demoKind;

          data.leadType = "contact";
          data.intent = "contact";
          data.source = "demo-hub";
          data.page = "/index.html";

          const res = await fetch("/.netlify/functions/new-lead", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify(data),
          });

          if (!res.ok) throw new Error("Request failed");

          document.getElementById("contactWrapper").innerHTML = `
            <div class="card success">
              <div class="name">Message sent ‚úÖ</div>
              <p class="sub" style="margin:0">
                Thanks! I got your message and I‚Äôll get back to you soon.
                If it‚Äôs time-sensitive, email
                <a style="color:var(--mm-gold); font-weight:900" href="mailto:Ryan@metalmasterapp.com">Ryan@metalmasterapp.com</a>.
              </p>
            </div>
          `;
        } catch (err) {
          notice.className = "notice error";
          notice.textContent = "Something went sideways. Please try again, or email Ryan@metalmasterapp.com.";
          btn.disabled = false;
          btn.style.opacity = "1";
          btn.textContent = "Send message";
        }
      }

      renderDemos();
      document.getElementById("contactForm").addEventListener("submit", handleContactSubmit);
    </script>
  </body>
</html>
